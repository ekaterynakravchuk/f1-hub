---
phase: 01-project-setup-infrastructure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - tailwind.config.ts
  - next.config.ts
  - components.json
  - app/globals.css
  - app/layout.tsx
  - components/providers/theme-provider.tsx
  - components/providers/query-provider.tsx
  - lib/utils.ts
autonomous: true

must_haves:
  truths:
    - "Developer can run `npm run build` without errors on a Next.js 15 project with TypeScript and Tailwind CSS"
    - "Application renders with dark theme by default using CSS variables and next-themes"
    - "TanStack Query provider wraps the application with staleTime: Infinity for immutable data caching"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies"
      contains: "next"
    - path: "app/layout.tsx"
      provides: "Root layout with providers"
      contains: "ThemeProvider"
    - path: "components/providers/theme-provider.tsx"
      provides: "Dark mode via next-themes"
      contains: "use client"
    - path: "components/providers/query-provider.tsx"
      provides: "TanStack Query client with staleTime: Infinity"
      contains: "staleTime"
    - path: "app/globals.css"
      provides: "Tailwind directives and dark theme CSS variables"
      contains: ".dark"
    - path: "components.json"
      provides: "shadcn/ui configuration"
      contains: "new-york"
  key_links:
    - from: "app/layout.tsx"
      to: "components/providers/theme-provider.tsx"
      via: "import and wrap children"
      pattern: "ThemeProvider"
    - from: "app/layout.tsx"
      to: "components/providers/query-provider.tsx"
      via: "import and wrap children"
      pattern: "QueryProvider"
    - from: "app/layout.tsx"
      to: "app/globals.css"
      via: "CSS import"
      pattern: "globals.css"
---

<objective>
Initialize the Next.js 15 project with all infrastructure dependencies and provider configuration.

Purpose: Establish the foundation that all subsequent plans build upon -- a working Next.js 15 app with TypeScript, Tailwind CSS, shadcn/ui (dark theme), TanStack Query, and next-themes wired into the root layout.

Output: A buildable Next.js project with dark-themed shell, ready for UI components.
</objective>

<execution_context>
@/Users/owner/.claude/get-shit-done/workflows/execute-plan.md
@/Users/owner/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-project-setup-infrastructure/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Next.js 15 project with shadcn/ui and dependencies</name>
  <files>
    package.json
    tsconfig.json
    tailwind.config.ts
    next.config.ts
    components.json
    app/globals.css
    lib/utils.ts
  </files>
  <action>
    1. Create Next.js 15 project in the current directory using `npx create-next-app@latest . --yes` (this uses defaults: TypeScript, Tailwind CSS, ESLint, App Router, Turbopack, src-dir varies -- if it creates a src/ dir, work within it; the file paths in this plan assume no src/ dir, adjust if needed).

    2. Install additional dependencies:
       ```
       npm install @tanstack/react-query next-themes
       ```

    3. Initialize shadcn/ui:
       ```
       npx shadcn@latest init -d
       ```
       If prompted: style = new-york, base color = neutral, CSS variables = yes. The `-d` flag uses defaults. Verify components.json is created with style "new-york" and baseColor "neutral".

    4. Add required shadcn/ui components for Phase 1:
       ```
       npx shadcn@latest add card button
       ```

    5. Verify globals.css has both light and dark CSS variable blocks (`:root` and `.dark`). shadcn/ui init should create these. If not present, the dark theme will not work.

    6. Verify tsconfig.json has path alias `@/*` mapping. create-next-app sets this up, but confirm it matches what components.json expects.

    IMPORTANT: Do NOT modify the default Next.js page.tsx yet -- that happens in Plan 02. Just ensure the project builds.
  </action>
  <verify>
    Run `npm run build` -- must complete without errors. Run `ls components/ui/` and confirm card.tsx and button.tsx exist. Run `cat components.json` and confirm style is "new-york". Run `cat package.json | grep -E "next-themes|tanstack"` and confirm both dependencies are listed.
  </verify>
  <done>
    Next.js 15 project builds successfully with TypeScript, Tailwind CSS, shadcn/ui (new-york style, neutral base), TanStack Query, and next-themes all installed. Card and Button components available in components/ui/.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create providers and wire root layout with dark theme</name>
  <files>
    components/providers/theme-provider.tsx
    components/providers/query-provider.tsx
    app/layout.tsx
  </files>
  <action>
    1. Create `components/providers/theme-provider.tsx`:
       - Mark "use client" at top
       - Import ThemeProvider from next-themes
       - Re-export as named ThemeProvider component that passes through children and props
       - Set defaultTheme="dark", attribute="class", enableSystem, disableTransitionOnChange
       - Follow the exact pattern from research: https://ui.shadcn.com/docs/dark-mode/next

    2. Create `components/providers/query-provider.tsx`:
       - Mark "use client" at top
       - Import QueryClient and QueryClientProvider from @tanstack/react-query
       - Use useState to create QueryClient instance (prevents sharing between requests)
       - Configure defaultOptions.queries: staleTime: Infinity, refetchOnWindowFocus: false, refetchOnReconnect: false (per user decision: React Query only, historical data is immutable)
       - Export named QueryProvider component wrapping children with QueryClientProvider

    3. Update `app/layout.tsx`:
       - Import ThemeProvider from @/components/providers/theme-provider
       - Import QueryProvider from @/components/providers/query-provider
       - Import globals.css (should already be there from create-next-app)
       - Set metadata: title = "F1 Hub", description = "Explore Formula 1 data and statistics"
       - Add Inter font from next/font/google (or keep the default font from create-next-app -- Geist is fine too)
       - HTML tag: lang="en", suppressHydrationWarning (prevents next-themes hydration warning)
       - Body: wrap children with ThemeProvider then QueryProvider (ThemeProvider outermost)
       - Add className to body: min-h-screen bg-background font-sans antialiased
       - Add flex flex-col to body for sticky footer pattern (footer pushes to bottom)

    IMPORTANT: Do NOT add navigation or footer to layout yet -- that is Plan 02. The layout should just have providers wrapping {children}.
  </action>
  <verify>
    Run `npm run dev` (background), then `curl -s http://localhost:3000 | head -50` to confirm the page renders. Check that the HTML contains `suppressHydrationWarning`. Run `npm run build` to confirm no type errors. Kill the dev server after verification.
  </verify>
  <done>
    Root layout wraps children with ThemeProvider (dark default) and QueryProvider (staleTime: Infinity). The app renders with dark background. Build passes with zero errors.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. `npm run dev` starts and http://localhost:3000 renders a page with dark background
3. components.json exists with style "new-york" and baseColor "neutral"
4. components/ui/card.tsx and components/ui/button.tsx exist
5. ThemeProvider and QueryProvider are imported in app/layout.tsx
6. HTML tag has suppressHydrationWarning attribute
</verification>

<success_criteria>
- Next.js 15 project with TypeScript, Tailwind CSS, ESLint builds without errors
- shadcn/ui configured with new-york style, neutral base color, CSS variables enabled
- Dark theme renders by default (dark background, light text)
- TanStack Query provider wraps app with staleTime: Infinity
- next-themes provider wraps app with dark as default theme
- Card and Button shadcn/ui components are available for Plan 02
</success_criteria>

<output>
After completion, create `.planning/phases/01-project-setup-infrastructure/01-01-SUMMARY.md`
</output>
